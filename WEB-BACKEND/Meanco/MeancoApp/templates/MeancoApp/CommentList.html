{% extends 'MeancoApp/Home.html' %}

{% block content %}

    <div class="col-md-4">
        <h1> {{ topic.label }} </h1>
        <ul style="list-style-type:none">
            {% for tag in tags %}
                <li> <h3> <span class="label label-default listSpan">{{ tag.label }}({{ tag.content }})</span> </h3></li>
            {% endfor %}

        </ul>
        {% if user.is_authenticated %}
            <form action="/API/AddTag" method="post"> {% csrf_token %}
                <input type="hidden" name="topicId" value="{{ topic.id }}"><br>
                Tag: <input type="text" class="form-control" rows="1" name="label"><br>
                Context: <input type="text" class="form-control" name="context"><br>
                <button type="submit" class="btn btn-success">Add Tag</button>
            </form>

        {% endif %}
    </div>
    <div class="col-md-8">
        <div class="row" style="background-color:#C2FABC;">
            <div class="col-md-2" >
                <h4> Votes </h4>
            </div>

            <div class="col-md-8">
                <h4> Top Comments </h4>
            </div>

            <div class="col-md-2">
                <h4> Up/Down Vote </h4>
            </div>
        </div>
        <p></p>
        <hr>
        {% for comment in comments %}
            <div class="row">
                <div class="col-md-2">
                    <h4> {{ comment.vote_count }} </h4>
                </div>
                <div class="col-md-8">
                    <p> {{ comment.content }}</p>
                    <p>{{ comment.current.timestamp }} {{ comment.profile.user.username }}</p>
                </div>
                <div class="col-md-2">
                    <a href="#" class="btn btn-default"><span class="glyphicon glyphicon-thumbs-up"></span></a>
                    <a href="#" class="btn btn-default"><span class="glyphicon glyphicon-thumbs-down"></span></a>
                </div>
            </div>
            <hr>
        {% endfor %}

        {% if user.is_authenticated %}
            <div class="form-group" style="position:fixed; bottom: 0; width: 700px">
                <label for="comment">Comment:</label>
                <form action="/API/AddComment" method="post"> {% csrf_token %}
                    <input type="hidden" name="topicId" value="{{ topic.id }}"><br>
                    <input type="text" class="form-control" rows="5" name="text"><br>
                    <button type="submit" class="btn btn-success">Add Comment</button>
                </form>
            </div>
        {% endif %}

    </div>

{% endblock %}


{% comment %}

{% extends 'MeancoApp/Home.html' %}
{% block content %}
    <font size="13" color="orange">{{ topic.label }}</font>
</br>
    <font size="5" color="#8a2be2">Relations:</font>
     </br>
    {% if user.is_authenticated %}
        <a href="/topic/{{ topic.id }}">Edit relations.</a>
    {% else %}
        <a href="{% url 'login'%}?next={{request.path}}">Login to edit relations!</a>
    {% endif %}
    </br>

    <!--Relations from this to others:-->
    {% for relation in relationsFrom %}
        {% if not relation.isBidirectional %}
            <h3>{{ relation.label }}:</h3> {{ relation.topic_a.label }} -> {{ relation.topic_b.label }}
        {% endif %}
        {% if relation.isBidirectional %}
            <h3>{{ relation.label }}:</h3> {{ relation.topic_a.label }} <-> {{ relation.topic_b.label }}
        {% endif %}
        </br>

    {% endfor %}
    <!--Relations to this from others.-->
    {% for relation in relationsTo %}
        {% if not relation.isBidirectional %}
            <h3>{{ relation.label }}:</h3> {{ relation.topic_a.label }} <- {{ relation.topic_b.label }}
        {% endif %}
    {% endfor %}

    </br>
    <font size="5" color="#8a2be2">Comments:</font>
    </br>
    {% if user.is_authenticated %}
        <h1>Add a comment:</h1>
        <form action="/API/AddComment" method="post"> {% csrf_token %}
            <input type="hidden" name="topicId" value="{{ topic.id }}"><br>
            Comment: <input type="text" name="text"><br>
            <button type="submit">Save</button>
        </form>
    {% else %}
        <a href="{% url 'login'%}?next={{request.path}}">Login to add a comment!</a>
    {% endif %}
    {% for comment in comments %}
        <hr>
        <div class="Comment">
            <div class="date">
                {{ comment.current.timestamp }}
            </div>
            <h2>{{ comment.profile.user.username }}</h2>
            <p>{{ comment.content }}</p>
        </div>
    {% endfor %}

    <font size="5" color="#8a2be2">Tags:</font>
    </br>
    {% if user.is_authenticated %}
        <h1>Add tag:</h1>
        <form action="/API/AddTag" method="post"> {% csrf_token %}
            <input type="hidden" name="topicId" value="{{ topic.id }}"><br>
            Tag: <input type="text" name="label"><br>
            Context: <input type="text" name="context"><br>
            <button type="submit">Save</button>
        </form>
    {% else %}
        <a href="{% url 'login'%}?next={{request.path}}">Login to edit tags!</a>
    {% endif %}
    {% for of in oftopic %}
        <p>{{ of.tag.label }}</p>
    {% endfor %}
{% endblock %}
{% endcomment %}