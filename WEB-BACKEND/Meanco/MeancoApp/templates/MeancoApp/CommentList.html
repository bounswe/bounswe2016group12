{% extends 'MeancoApp/Home.html' %}
{% block content %}
    <h1>{{ topic.name.label }}</h1>

    <h2>Relations:</h2>
    {% if user.is_authenticated %}
        <a href="/topic/{{ topic.id }}">Edit relations.</a>
    {% else %}
        <a href="{% url 'login'%}?next={{request.path}}">Login to edit relations!</a>
    {% endif %}
    <!--Relations from this to others:-->
    {% for relation in relationsFrom %}
        {% for label in relation.label %}
            <!--{% if label.direction %}
                <h3>{{ label.text }}:</h3> {{ relation.topic_a.name.label }} -> {{ relation.topic_b.name.label }}
            {% endif %}
            {% if not label.direction %}
                <h3>{{ label.text }}:</h3> {{ relation.topic_a.name.label }} <-> {{ relation.topic_b.name.label }}
            {% endif %}-->
            <h3>{{ label.text }}:</h3> {{ relation.topic_a.name.label }} - {{ relation.topic_b.name.label }}
        {% endfor %}
    {% endfor %}
    <!--Relations to this from others.-->
    {% for relation in relationsTo %}
        {% for label in relation.label %}
            <!--{% if label.direction %}
            <h3>{{ label.text }}:</h3> {{ relation.topic_a.name.label }} <- {{ relation.topic_b.name.label }}
            {% endif %}
            {% if not label.direction %}
                <h3>{{ label.text }}:</h3> {{ relation.topic_a.name.label }} <-> {{ relation.topic_b.name.label }}
            {% endif %}-->
            <h3>{{ label.text }}:</h3> {{ relation.topic_a.name.label }} - {{ relation.topic_b.name.label }}
        {% endfor %}
    {% endfor %}

    <h2>Comments:</h2>
    {% if user.is_authenticated %}
        <a href="/topic/{{ topic.id }}">Add a comment.</a>
    {% else %}
        <a href="{% url 'login'%}?next={{request.path}}">Login to add a comment!</a>
    {% endif %}
    {% for comment in comments %}
        <hr>
        <div class="Comment">
            <div class="date">
                {{ comment.current.timestamp }}
            </div>
            <h2>{{ comment.profile.user.username }}</h2>
            <p>{{ comment.content }}</p>
        </div>
    {% endfor %}

    <h2>Tags:</h2>
    {% if user.is_authenticated %}
        <a href="/topic/{{ topic.id }}">Edit tags.</a>
    {% else %}
        <a href="{% url 'login'%}?next={{request.path}}">Login to edit tags!</a>
    {% endif %}
    {% for of in oftopic %}
        <p>{{ of.tag.label }}</p>
    {% endfor %}
{% endblock %}
