{% extends 'MeancoApp/Home.html' %}
{% block content %}
    <font size="13" color="orange">{{ topic.name.label }}</font>
</br>
    <font size="5" color="#8a2be2">Relations:</font>
     </br>
    {% if user.is_authenticated %}
        <a href="/topic/{{ topic.id }}">Edit relations.</a>
    {% else %}
        <a href="{% url 'login'%}?next={{request.path}}">Login to edit relations!</a>
    {% endif %}
    </br>

    <!--Relations from this to others:-->
    {% for relation in relationsFrom %}
        {% for label in relation.label %}
            <!--{% if label.direction %}
                <h3>{{ label.text }}:</h3> {{ relation.topic_a.name.label }} -> {{ relation.topic_b.name.label }}
            {% endif %}
            {% if not label.direction %}
                <h3>{{ label.text }}:</h3> {{ relation.topic_a.name.label }} <-> {{ relation.topic_b.name.label }}
            {% endif %}-->
            <font size="5">{{ label.text }}:</font> {{ relation.topic_a.name.label }} - {{ relation.topic_b.name.label }}
            </br>
        {% endfor %}
    {% endfor %}
    <!--Relations to this from others.-->
    {% for relation in relationsTo %}
        {% for label in relation.label %}
            <!--{% if label.direction %}
            <h3>{{ label.text }}:</h3> {{ relation.topic_a.name.label }} <- {{ relation.topic_b.name.label }}
            {% endif %}
            {% if not label.direction %}
                <h3>{{ label.text }}:</h3> {{ relation.topic_a.name.label }} <-> {{ relation.topic_b.name.label }}
            {% endif %}-->
            <h3>{{ label.text }}:</h3> {{ relation.topic_a.name.label }} - {{ relation.topic_b.name.label }}
        {% endfor %}
    {% endfor %}

    </br>
    <font size="5" color="#8a2be2">Comments:</font>
    </br>
    {% if user.is_authenticated %}
        <h1>Add a comment:</h1>
        <form action="/API/AddComment" method="post"> {% csrf_token %}
            <input type="hidden" name="topicId" value="{{ topic.id }}"><br>
            Comment: <input type="text" name="text"><br>
            <button type="submit">Save</button>
        </form>
    {% else %}
        <a href="{% url 'login'%}?next={{request.path}}">Login to add a comment!</a>
    {% endif %}
    {% for comment in comments %}
        <hr>
        <div class="Comment">
            <div class="date">
                {{ comment.current.timestamp }}
            </div>
            <h2>{{ comment.profile.user.username }}</h2>
            <p>{{ comment.content }}</p>
        </div>
    {% endfor %}

    <font size="5" color="#8a2be2">Tags:</font>
    </br>
    {% if user.is_authenticated %}
        <h1>Add tag:</h1>
        <form action="/API/AddTag" method="post"> {% csrf_token %}
            <input type="hidden" name="topicId" value="{{ topic.id }}"><br>
            Tag: <input type="text" name="label"><br>
            Context: <input type="text" name="context"><br>
            <button type="submit">Save</button>
        </form>
    {% else %}
        <a href="{% url 'login'%}?next={{request.path}}">Login to edit tags!</a>
    {% endif %}
    {% for of in oftopic %}
        <p>{{ of.tag.label }}</p>
    {% endfor %}
{% endblock %}
